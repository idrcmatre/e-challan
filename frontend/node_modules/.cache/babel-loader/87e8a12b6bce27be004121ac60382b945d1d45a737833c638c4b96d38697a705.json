{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChallanForm=_ref=>{let{onChallanCreated,onClose}=_ref;const{user}=useAuth();const[formData,setFormData]=useState({citizenEmail:'',vehicleNumber:'',violationType:'Speeding',location:'',fineAmount:'',description:''});const[loading,setLoading]=useState(false);const violationTypes=['Speeding','Red Light','Wrong Parking','No Helmet','Mobile Usage','Other'];const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post('http://16.176.131.224/api/challans',formData,{headers:{Authorization:`Bearer ${user.token}`}});onChallanCreated(response.data);setFormData({citizenEmail:'',vehicleNumber:'',violationType:'Speeding',location:'',fineAmount:'',description:''});onClose();}catch(error){var _error$response,_error$response$data;alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create challan');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Issue New E-Challan\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Citizen Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:formData.citizenEmail,onChange:e=>setFormData({...formData,citizenEmail:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"citizen@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Vehicle Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.vehicleNumber,onChange:e=>setFormData({...formData,vehicleNumber:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"ABC-1234\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Violation Type\"}),/*#__PURE__*/_jsx(\"select\",{value:formData.violationType,onChange:e=>setFormData({...formData,violationType:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",children:violationTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.location,onChange:e=>setFormData({...formData,location:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Street name, City\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Fine Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",value:formData.fineAmount,onChange:e=>setFormData({...formData,fineAmount:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",placeholder:\"500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData({...formData,description:e.target.value}),className:\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",rows:\"3\",placeholder:\"Additional details about the violation...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50\",children:loading?'Creating...':'Issue Challan'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400\",children:\"Cancel\"})]})]})]});};export default ChallanForm;","map":{"version":3,"names":["React","useState","axios","useAuth","jsx","_jsx","jsxs","_jsxs","ChallanForm","_ref","onChallanCreated","onClose","user","formData","setFormData","citizenEmail","vehicleNumber","violationType","location","fineAmount","description","loading","setLoading","violationTypes","handleSubmit","e","preventDefault","response","post","headers","Authorization","token","data","error","_error$response","_error$response$data","alert","message","className","children","onClick","onSubmit","type","required","value","onChange","target","placeholder","map","min","rows","disabled"],"sources":["/home/ubuntu/e-challan/frontend/src/components/ChallanForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ChallanForm = ({ onChallanCreated, onClose }) => {\r\n    const { user } = useAuth();\r\n    const [formData, setFormData] = useState({\r\n        citizenEmail: '',\r\n        vehicleNumber: '',\r\n        violationType: 'Speeding',\r\n        location: '',\r\n        fineAmount: '',\r\n        description: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const violationTypes = [\r\n        'Speeding',\r\n        'Red Light',\r\n        'Wrong Parking',\r\n        'No Helmet',\r\n        'Mobile Usage',\r\n        'Other'\r\n    ];\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                'http://16.176.131.224/api/challans',\r\n                formData,\r\n                {\r\n                    headers: { Authorization: `Bearer ${user.token}` }\r\n                }\r\n            );\r\n\r\n            onChallanCreated(response.data);\r\n            setFormData({\r\n                citizenEmail: '',\r\n                vehicleNumber: '',\r\n                violationType: 'Speeding',\r\n                location: '',\r\n                fineAmount: '',\r\n                description: ''\r\n            });\r\n            onClose();\r\n        } catch (error) {\r\n            alert(error.response?.data?.message || 'Failed to create challan');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <h2 className=\"text-xl font-bold\">Issue New E-Challan</h2>\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"text-gray-500 hover:text-gray-700\"\r\n                >\r\n                    âœ•\r\n                </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Citizen Email\r\n                    </label>\r\n                    <input\r\n                        type=\"email\"\r\n                        required\r\n                        value={formData.citizenEmail}\r\n                        onChange={(e) => setFormData({ ...formData, citizenEmail: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"citizen@example.com\"\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Vehicle Number\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        required\r\n                        value={formData.vehicleNumber}\r\n                        onChange={(e) => setFormData({ ...formData, vehicleNumber: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"ABC-1234\"\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Violation Type\r\n                    </label>\r\n                    <select\r\n                        value={formData.violationType}\r\n                        onChange={(e) => setFormData({ ...formData, violationType: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                    >\r\n                        {violationTypes.map(type => (\r\n                            <option key={type} value={type}>{type}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Location\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        required\r\n                        value={formData.location}\r\n                        onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"Street name, City\"\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Fine Amount (â‚¹)\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        required\r\n                        min=\"0\"\r\n                        value={formData.fineAmount}\r\n                        onChange={(e) => setFormData({ ...formData, fineAmount: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"500\"\r\n                    />\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Description\r\n                    </label>\r\n                    <textarea\r\n                        value={formData.description}\r\n                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                        className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                        rows=\"3\"\r\n                        placeholder=\"Additional details about the violation...\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex space-x-4\">\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50\"\r\n                    >\r\n                        {loading ? 'Creating...' : 'Issue Challan'}\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChallanForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}